---
title: "Poverty and Mental Health Using Medical Expenditure Panel Survey (MEPS)"
date: 2025-02-25
output: html_document 
---

# Poverty and Mental Health Using Medical Expenditure Panel Survey (MEPS)

## Quarto

Quarto enables you to weave together content and executable code into a finished document. To learn more about Quarto see <https://quarto.org>.

## Running Code

When you click the **Render** button a document will be generated that includes both content and the output of embedded code. You can embed code like this:

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

#| label: Setting up the quarto for data cleaning

library(readr) #Run for every new R session

#Source an R script that has imported ASCII file and data-cleaned, extracting only relevant variables
source ("Loading and cleaning h243.R")

#Source an R script that merges full year consolidated and medical conditions file 
source("Merged h243 and h241.R")

```

```{r}
#| label: tbl-h243_selected
#| tbl-cap: "Poverty and Perceived Mental Health"
#| apa-note: Extracted relevant variables from 2022 Full Year Consolidated File and 2022 Medical Conditions File.

#install.packages("flextable")  # Install flextable if you haven't already
library(flextable)  # Load flextable

head(h243_selected) %>% #With categorized rows but no medical conditions file information
  flextable() %>%
  flextable::theme_apa()

```

```{r}
#| label: tbl-h243_selected
#| tbl-cap: "Poverty and Reported Diagnosed Mental Health"
#| apa-note: Extracted relevant variables from 2022 Full Year Consolidated File and 2022 Medical Conditions File.

#install.packages("flextable")  # Install flextable if you haven't already
library(flextable)  # Load flextable

head(h243_selected) %>% #With categorized rows but no medical conditions file information
  flextable() %>%
  flextable::theme_apa()

```


```{r}
#| label: Tables of categorical variables 
#| tbl-cap: "Poverty and Expenditure on Prescribed Psychiatric Drug"
#| apa-note: Extracted relevant variables from 2022 Full Year Consolidated File and 2022 Prescribed Medicine File. Denotes both sum of payments that include insurance and third-party coverage and out-of-pocket expenditure. 

head(h241h243_merged_cate) %>% #Including medical conditions file and categorized
  flextable() %>%
  flextable::theme_apa()
```


```{r}
#| label: tbl-h241h243_merged
#| tbl-cap: "Poverty, Diagnosed Mental Health, and Prescribed Psychiatric Drug Expenditure"
#| apa-note: Extracted relevant variables from 2022 Full Year Consolidated File and 2022 Medical Conditions File.


head(h241h243_merged) %>% #Including medical conditions file information but left numerical
  flextable() %>%
  flextable::theme_apa()

```


```{r}
#| label: Summary statistics 

#Calculate the mean and standard deviation
summary(h243_selected[, c("RXEXP22", "RXSLF22", "AGE31X")])
```


```{r}
#| label: Visualization of different variables

library(ggplot2)

#Mental health by poverty level
ggplot(h243_selected, aes(x = MNHLTH31, fill = POVCAT22)) +
    geom_bar(position = "fill") +
    labs(title = "Perceived Mental Health by Poverty Level", x = "Mental Health Status", y = "Proportion") +
    scale_y_continuous(labels = scales::percent) +
    theme_minimal()

#Insurance status and medication expenditure disparities

```

```

```{r}
#|label: Visualization of merged data 

ggplot(h241h243_merged, aes(x = POVCAT22, y = RXEXP22)) + geom_bar() + 
  labs(title = "Prescription Expenditure by Poverty Level", x = "Poverty Level", y = "Total Prescription Expenditure")

```

You can add options to executable code like this

```{r}
#| echo: false
2 * 2
```

The `echo: false` option disables the printing of code (only output is displayed).
